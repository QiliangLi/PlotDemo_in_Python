from scipy.stats import norm
import matplotlib.pyplot as plt
import numpy as np
import csv
from scipy import stats


def getCDFPlotValue(ratio):
    fs_xk = np.sort(ratio)
    val, cnt = np.unique(ratio, return_counts=True)
    pmf = cnt / len(ratio)
    fs_rv_dist = stats.rv_discrete(name='fs_rv_dist', values=(val, pmf))

    return val, fs_rv_dist


if __name__=="__main__":
    randReadRatio=[1.3333333333333333, 1.3571428571428572, 1.4285714285714286, 1.2619047619047619, 1.3095238095238095, 1.2857142857142858, 1.2857142857142858, 1.3571428571428572, 1.4285714285714286, 1.4047619047619047, 1.380952380952381, 1.2857142857142858, 1.3333333333333333, 1.3333333333333333, 1.4047619047619047, 1.3095238095238095, 1.3571428571428572, 1.2619047619047619, 1.3095238095238095, 1.2619047619047619, 1.5238095238095237, 1.3571428571428572, 1.380952380952381, 1.4285714285714286, 1.3095238095238095, 1.380952380952381, 1.3571428571428572, 1.4047619047619047, 1.380952380952381, 1.4761904761904763, 1.4285714285714286, 1.5476190476190477, 1.4047619047619047, 1.2619047619047619, 1.380952380952381, 1.5714285714285714, 1.4047619047619047, 1.3333333333333333, 1.2857142857142858, 1.2857142857142858, 1.3571428571428572, 1.4761904761904763, 1.2857142857142858, 1.2619047619047619, 1.2857142857142858, 1.4047619047619047, 1.380952380952381, 1.3095238095238095, 1.4523809523809523, 1.3095238095238095, 1.3095238095238095, 1.3095238095238095, 1.4285714285714286, 1.1904761904761905, 1.3095238095238095, 1.3095238095238095, 1.2857142857142858, 1.3571428571428572, 1.4285714285714286, 1.4285714285714286, 1.3333333333333333, 1.3095238095238095, 1.5238095238095237, 1.380952380952381, 1.4285714285714286, 1.3333333333333333, 1.3095238095238095, 1.4285714285714286, 1.2857142857142858, 1.4285714285714286, 1.3333333333333333, 1.4285714285714286, 1.5238095238095237, 1.2857142857142858, 1.3571428571428572, 1.380952380952381, 1.3571428571428572, 1.3571428571428572, 1.2619047619047619, 1.3095238095238095, 1.3333333333333333, 1.4047619047619047, 1.3095238095238095, 1.3333333333333333, 1.3095238095238095, 1.380952380952381, 1.4523809523809523, 1.380952380952381, 1.3571428571428572, 1.380952380952381, 1.380952380952381, 1.4047619047619047, 1.2857142857142858, 1.1904761904761905, 1.5476190476190477, 1.380952380952381, 1.3333333333333333, 1.4285714285714286, 1.3333333333333333]
    randWriteRatio=[2.0, 1.7142857142857142, 2.2857142857142856, 1.5714285714285714, 1.8571428571428572, 2.142857142857143, 2.142857142857143, 2.0, 2.0, 2.0, 1.8571428571428572, 1.8571428571428572, 2.0, 1.7142857142857142, 2.142857142857143, 2.0, 2.0, 1.8571428571428572, 1.8571428571428572, 2.0, 1.7142857142857142, 2.2857142857142856, 1.7142857142857142, 2.0, 2.0, 1.7142857142857142, 2.142857142857143, 1.8571428571428572, 1.8571428571428572, 1.8571428571428572, 2.0, 2.2857142857142856, 2.0, 2.0, 2.142857142857143, 1.8571428571428572, 1.8571428571428572, 1.7142857142857142, 1.8571428571428572, 1.8571428571428572, 1.8571428571428572, 1.7142857142857142, 1.8571428571428572, 2.0, 2.0, 1.8571428571428572, 2.142857142857143, 1.7142857142857142, 2.142857142857143, 1.8571428571428572, 2.0, 1.7142857142857142, 2.0, 2.142857142857143, 2.0, 1.8571428571428572, 1.8571428571428572, 2.4285714285714284, 2.0, 1.7142857142857142, 2.142857142857143, 2.0, 1.7142857142857142, 1.8571428571428572, 1.7142857142857142, 1.5714285714285714, 2.0, 1.8571428571428572, 1.7142857142857142, 2.142857142857143, 1.8571428571428572, 1.8571428571428572, 2.0, 1.8571428571428572, 2.2857142857142856, 1.8571428571428572, 1.7142857142857142, 1.8571428571428572, 2.0, 1.8571428571428572, 1.5714285714285714, 2.142857142857143, 2.0, 2.0, 1.7142857142857142, 1.8571428571428572, 2.0, 1.8571428571428572, 1.8571428571428572, 1.8571428571428572, 2.0, 2.2857142857142856, 2.142857142857143, 1.5714285714285714, 2.0, 1.8571428571428572, 2.2857142857142856, 2.0, 2.142857142857143]

    raid2ppReadRatio=[1.0238095238095237, 1.0476190476190477, 1.0476190476190477, 1.0238095238095237, 1.0476190476190477, 1.0238095238095237, 1.0238095238095237, 1.0476190476190477, 1.0476190476190477, 1.0238095238095237, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0238095238095237, 1.0238095238095237, 1.0238095238095237, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0238095238095237, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0238095238095237, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0238095238095237, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0238095238095237, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0238095238095237, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0714285714285714, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0714285714285714, 1.0476190476190477, 1.0714285714285714, 1.0476190476190477, 1.0476190476190477, 1.0238095238095237, 1.0476190476190477, 1.0476190476190477, 1.0476190476190477, 1.0714285714285714, 1.0476190476190477, 1.0714285714285714, 1.0714285714285714, 1.119047619047619, 1.1428571428571428]

    fig, ax = plt.subplots(figsize=(10, 4))

    plt.xlabel('Load Balance Rate', fontsize=20)

    ax.set_ylim([0, 1.05])
    ax.set_xlim([1.0, 2.6])

    plt.xticks(fontsize=20)
    plt.yticks(fontsize=20)

    randReadVal, randRead_fs_rv_dist=getCDFPlotValue(randReadRatio)
    randWriteVal, randWrite_fs_rv_dist=getCDFPlotValue(randWriteRatio)

    raid2ppReadVal, raid2ppRead_fs_rv_dist=getCDFPlotValue(raid2ppReadRatio)

    plt.plot(randReadVal, randRead_fs_rv_dist.cdf(randReadVal), 'r-', lw=5, alpha=0.6, label="Random Read")
    plt.plot(randWriteVal, randWrite_fs_rv_dist.cdf(randWriteVal), 'g-', lw=5, alpha=0.6, label="Random Write")
    plt.plot(raid2ppReadVal, raid2ppRead_fs_rv_dist.cdf(raid2ppReadVal), 'b-', lw=5, alpha=0.6, label="RAID2pp Read")
    plt.title("CDF", fontsize=20)
    plt.legend(loc=4, fontsize=20)
    plt.show()


