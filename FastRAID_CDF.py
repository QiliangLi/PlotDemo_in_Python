from scipy.stats import norm
import matplotlib.pyplot as plt
import numpy as np
import csv
from scipy import stats


def getCDFPlotValue(ratio):
    fs_xk = np.sort(ratio)
    val, cnt = np.unique(ratio, return_counts=True)
    pmf = cnt / len(ratio)
    fs_rv_dist = stats.rv_discrete(name='fs_rv_dist', values=(val, pmf))

    return val, fs_rv_dist


if __name__=="__main__":
    randReadRatio=[2.0, 2.1666666666666665, 2.1666666666666665, 2.0, 2.0, 2.1666666666666665, 1.8333333333333333, 2.1666666666666665, 2.1666666666666665, 2.1666666666666665, 1.8333333333333333, 2.0, 2.1666666666666665, 1.6666666666666667, 2.1666666666666665, 1.6666666666666667, 2.0, 2.1666666666666665, 1.8333333333333333, 2.0, 1.8333333333333333, 1.8333333333333333, 2.1666666666666665, 2.3333333333333335, 1.8333333333333333, 1.8333333333333333, 2.0, 2.1666666666666665, 2.0, 2.1666666666666665, 1.8333333333333333, 1.8333333333333333, 2.0, 2.0, 2.3333333333333335, 2.1666666666666665, 2.0, 2.0, 2.3333333333333335, 1.6666666666666667, 1.6666666666666667, 1.8333333333333333, 2.3333333333333335, 1.8333333333333333, 1.5, 1.8333333333333333, 2.0, 2.0, 2.1666666666666665, 1.6666666666666667, 2.5, 2.0, 1.8333333333333333, 1.6666666666666667, 2.0, 2.0, 2.5, 1.8333333333333333, 2.1666666666666665, 2.3333333333333335, 2.0, 2.0, 2.1666666666666665, 1.8333333333333333, 2.1666666666666665, 2.0, 1.8333333333333333, 2.0, 1.8333333333333333, 1.8333333333333333, 1.6666666666666667, 2.3333333333333335, 2.1666666666666665, 2.0, 2.0, 1.8333333333333333, 2.5, 2.0, 1.8333333333333333, 2.0, 2.3333333333333335, 2.3333333333333335, 2.6666666666666665, 2.0, 2.3333333333333335, 2.3333333333333335, 1.6666666666666667, 1.8333333333333333, 1.6666666666666667, 1.6666666666666667, 2.0, 1.8333333333333333, 1.8333333333333333, 1.8333333333333333, 1.8333333333333333, 2.5, 2.1666666666666665, 1.8333333333333333, 2.1666666666666665, 2.0]
    randWriteRatio=[5.0, 3.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 3.0, 4.0, 3.0, 3.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 4.0, 3.0, 4.0, 4.0, 3.0, 4.0, 4.0, 4.0, 5.0, 4.0, 5.0, 3.0, 3.0, 4.0, 4.0, 5.0, 3.0, 4.0, 5.0, 3.0, 3.0, 3.0, 4.0, 4.0, 3.0, 4.0, 5.0, 3.0, 4.0, 5.0, 4.0, 5.0, 4.0, 4.0, 3.0, 4.0, 4.0, 3.0, 3.0, 4.0, 4.0, 3.0, 4.0, 3.0, 4.0, 5.0, 4.0, 4.0, 4.0, 4.0, 3.0, 6.0, 4.0, 4.0, 3.0, 4.0, 3.0, 4.0, 4.0, 4.0, 5.0, 4.0, 4.0, 4.0, 4.0, 5.0, 4.0, 4.0, 5.0, 6.0, 4.0, 3.0, 4.0, 4.0, 4.0, 6.0, 4.0]

    raid2ppReadRatio=[1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.1666666666666667, 1.3333333333333333, 1.3333333333333333, 1.3333333333333333, 1.3333333333333333, 2.0]
    raid2ppWriteRatio=[1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]

    fig, ax = plt.subplots(figsize=(10, 4))

    plt.xlabel('λ', fontsize=20)
    plt.ylabel('Ratio of λ', fontsize=20)
    batchSize=58

    ax.set_ylim([0, 1.05])
    ax.set_xlim([0.8, max(randWriteRatio)+0.2])

    my_x_ticks = np.arange(1, 6.5, 0.5)
    my_y_ticks = np.arange(0, 1.05, 0.2)

    plt.xticks(my_x_ticks, fontsize=20)
    plt.yticks(fontsize=20)
    plt.grid(ls='--')

    randReadVal, randRead_fs_rv_dist=getCDFPlotValue(randReadRatio)
    randWriteVal, randWrite_fs_rv_dist=getCDFPlotValue(randWriteRatio)

    raid2ppReadVal, raid2ppRead_fs_rv_dist=getCDFPlotValue(raid2ppReadRatio)
    raid2ppWriteVal, raid2ppWrite_fs_rv_dist=getCDFPlotValue(raid2ppWriteRatio)
    # plt.hlines(1.0, 2.0, 6.0, colors="r", linestyles='-', lw=5, alpha=0.6)
    # plt.hlines(1.0, 2.75, 6.0, colors="b", linestyles='-', lw=5, alpha=0.6)

    plt.hlines(1.0, 1.0, 2.0, colors="y",linestyles='-', lw=5, alpha=0.6)

    plt.plot(randReadVal, randRead_fs_rv_dist.cdf(randReadVal), 'r-', lw=5, alpha=0.6, label="${λ_{read}}$ of ${RAID_R}$")
    plt.plot(randWriteVal, randWrite_fs_rv_dist.cdf(randWriteVal), 'g-', lw=5, alpha=0.6, label="${λ_{write}}$ of ${RAID_R}$")
    plt.plot(raid2ppReadVal, raid2ppRead_fs_rv_dist.cdf(raid2ppReadVal), 'b-', lw=5, alpha=0.6, label="${λ_{read}}$ of ${RAID2.0}$++")
    plt.plot(raid2ppWriteVal, raid2ppWrite_fs_rv_dist.cdf(raid2ppWriteVal), 'y-', lw=5, alpha=0.6, label="${λ_{write}}$ of ${RAID2.0}$++")
    # plt.title("CDF", fontsize=20)
    plt.legend(loc="best", fontsize=20)
    plt.tight_layout()
    plt.savefig("BatchSize=" + str(batchSize) + ".pdf", dpi=600, format="pdf")
    plt.show()


